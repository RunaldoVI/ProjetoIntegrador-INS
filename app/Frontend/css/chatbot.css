:root{
  --cb-primary:#4f46e5;               /* indigo-600 */
  --cb-bg:#ffffff;
  --cb-elev:#ffffff;                   /* cartão */
  --cb-text:#0f172a;                   /* slate-900 */
  --cb-muted:#64748b;                  /* slate-500 */
  --cb-border:#e2e8f0;                 /* slate-200 */
  --cb-radius:16px;
  --cb-shadow-lg:0 20px 50px rgba(2,6,23,.15);
  --cb-shadow-sm:0 1px 2px rgba(2,6,23,.06);
  --cb-bot-bg:#f8fafc;
  --cb-you-bg:#eef2ff;
  --cb-bot-border:#e2e8f0;
  --cb-you-border:#c7d2fe;
}
.dark{
  --cb-bg:#0b1220;
  --cb-elev:#0f172a;
  --cb-text:#e5e7eb;
  --cb-muted:#94a3b8;
  --cb-border:#1f2937;
  --cb-shadow-lg:0 20px 60px rgba(0,0,0,.45);
  --cb-bot-bg:#0f172a;
  --cb-you-bg:#1b2540;
  --cb-bot-border:#101826;
  --cb-you-border:#243b6b;
}

/* Launcher (bolha) */
.cb-launcher{
  position:fixed; right:20px; bottom:20px;
  width:64px; height:64px; border-radius:999px;
  background:var(--cb-primary); color:#fff; display:grid; place-items:center;
  box-shadow:var(--cb-shadow-lg); border:0; cursor:pointer; z-index:9999;
  transition:transform .2s ease, box-shadow .2s ease, background .2s ease;
}
.cb-launcher:hover{ transform:translateY(-2px) scale(1.02); }
.cb-launcher:active{ transform:translateY(0) scale(.98); }
.cb-badge{
  position:absolute; top:-6px; right:-6px; min-width:22px; height:22px; padding:0 6px;
  border-radius:999px; background:#ef4444; color:#fff; font-size:12px; font-weight:700;
  display:none; align-items:center; justify-content:center; box-shadow:var(--cb-shadow-lg);
}

/* Painel */
.cb-panel{
  position:fixed; right:20px; bottom:100px; width:380px; max-width:calc(100vw - 32px);
  height:540px; max-height:calc(100vh - 140px);
  display:none; flex-direction:column; z-index:9999; overflow:hidden;
  border-radius:calc(var(--cb-radius) + 4px);
  background:rgba(255,255,255,.75); /* glass */
  border:1px solid var(--cb-border);
  box-shadow:var(--cb-shadow-lg);
  backdrop-filter:saturate(140%) blur(14px);
}
.dark .cb-panel{ background:rgba(15,23,42,.6); }

/* Header */
.cb-header{
  user-select:none; display:flex; align-items:center; gap:12px; padding:12px 14px;
  background:linear-gradient(180deg, rgba(79,70,229,.14), transparent);
  border-bottom:1px solid var(--cb-border); cursor:grab;
}
.cb-header:active{ cursor:grabbing; }
.cb-avatar{
  width:32px; height:32px; border-radius:10px; flex:none; color:#fff; font-weight:800;
  display:grid; place-items:center; background:linear-gradient(135deg,#4f46e5,#22d3ee);
  box-shadow:inset 0 4px 16px rgba(255,255,255,.2);
  position:relative;
}
.cb-avatar::after{
  content:""; position:absolute; right:-2px; bottom:-2px; width:10px; height:10px; border-radius:999px;
  background:#22c55e; box-shadow:0 0 0 2px var(--cb-elev);
}
.cb-title{ font-weight:700; font-size:14px; color:var(--cb-text); }
.cb-subtitle{ font-size:12px; color:var(--cb-muted); }
.cb-spacer{ flex:1; }
.cb-btn{
  background:transparent; border:0; color:var(--cb-muted); cursor:pointer; padding:6px; border-radius:8px;
  transition:background .15s ease, color .15s ease;
}
.cb-btn:hover{ background:rgba(148,163,184,.12); color:var(--cb-text); }

/* Corpo */
.cb-body{
  display:flex; flex-direction:column; gap:10px; padding:14px; overflow-y:auto; height:100%;
  scroll-behavior:smooth; background:linear-gradient(180deg, rgba(2,6,23,.03), transparent 30%);
}

/* Mensagens */
.cb-message{ display:flex; gap:8px; align-items:flex-end; max-width:86%; position:relative; }
.cb-message.you{ align-self:flex-end; flex-direction:row-reverse; }
.cb-bubble{
  padding:10px 12px; border-radius:14px; line-height:1.45; font-size:14px;
  background:var(--cb-bot-bg); color:var(--cb-text); border:1px solid var(--cb-bot-border);
  box-shadow:var(--cb-shadow-sm); white-space:pre-wrap; word-wrap:break-word;
}
.cb-message.you .cb-bubble{
  background:var(--cb-you-bg); border-color:var(--cb-you-border);
}
.cb-message::after{
  content:""; width:10px; height:10px; position:absolute; bottom:8px; left:-4px;
  background:var(--cb-bot-bg); border-left:1px solid var(--cb-bot-border); border-bottom:1px solid var(--cb-bot-border);
  transform:rotate(45deg); border-bottom-left-radius:3px;
}
.cb-message.you::after{
  left:auto; right:-4px; background:var(--cb-you-bg);
  border-left:none; border-bottom:none; border-right:1px solid var(--cb-you-border); border-top:1px solid var(--cb-you-border);
}
.cb-time{ font-size:10px; color:var(--cb-muted); margin:0 4px 2px; }

/* Digitando… */
.cb-typing{ display:inline-grid; grid-auto-flow:column; gap:4px; align-items:center; }
.cb-typing span{ width:6px; height:6px; border-radius:999px; background:var(--cb-muted); opacity:.35; animation:cb-blink 1.1s infinite; }
.cb-typing span:nth-child(2){ animation-delay:.15s; } .cb-typing span:nth-child(3){ animation-delay:.3s; }
@keyframes cb-blink{ 0%,80%,100%{opacity:.2} 40%{opacity:1} }

/* Footer */
.cb-footer{
  border-top:1px solid var(--cb-border); padding:10px; background:linear-gradient(0deg, rgba(2,6,23,.03), transparent);
  display:grid; gap:8px;
}
.cb-suggestions{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:6px; }
.cb-chip{
  padding:6px 10px; font-size:12px; border-radius:999px; cursor:pointer; user-select:none;
  background:rgba(99,102,241,.12); color:var(--cb-text); border:1px solid var(--cb-border);
}
.cb-chip:hover{ background:rgba(99,102,241,.18); }

.cb-input-wrap{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:8px;
  border:1px solid var(--cb-border); border-radius:12px; padding:8px 10px; background:var(--cb-elev);
}
.cb-icon{ width:18px; height:18px; color:var(--cb-muted); }
.cb-input{
  width:100%; border:0; outline:0; font-size:14px; background:transparent; color:var(--cb-text);
}
.cb-send{
  border:0; border-radius:10px; padding:10px; display:grid; place-items:center;
  background:var(--cb-primary); color:#fff; font-weight:700; cursor:pointer; box-shadow:var(--cb-shadow-sm);
}
.cb-send:disabled{ opacity:.6; cursor:not-allowed; }

/* Minimize */
.cb-panel.minimized{ height:62px; }
.cb-panel.minimized .cb-body, .cb-panel.minimized .cb-footer{ display:none; }

/* Acessibilidade/ajustes */
.hidden{ display:none !important; }
@media (max-width:480px){ .cb-panel{ right:12px; left:12px; width:auto; } }
